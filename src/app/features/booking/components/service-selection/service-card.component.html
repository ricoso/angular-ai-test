<mat-card
  class="service-card"
  [class.service-card--selected]="isSelected()"
  [class.service-card--clickable]="!hasTireChangeVariants()"
  [attr.role]="hasTireChangeVariants() ? 'region' : 'button'"
  [attr.aria-pressed]="hasTireChangeVariants() ? null : isSelected()"
  [attr.tabindex]="hasTireChangeVariants() ? null : 0"
  (click)="onCardClick()"
  (keydown.enter)="onCardClick()"
  (keydown.space)="onCardClick()">

  @if (isSelected()) {
    <mat-icon class="service-card__check" aria-hidden="true">check_circle</mat-icon>
  }

  <mat-card-content class="service-card__content">
    <span class="icon-framed service-card__icon">
      <mat-icon aria-hidden="true">{{ service().icon }}</mat-icon>
    </span>
    <h2 class="service-card__title">{{ service().titleKey | translate }}</h2>
    <p class="service-card__description">{{ service().descriptionKey | translate }}</p>

    @if (hasTireChangeVariants()) {
      <div class="service-card__variants">
        @for (variant of service().variants; track variant.id) {
          <label class="service-card__radio-label">
            <input
              type="radio"
              name="tire-change-variant"
              [value]="variant.id"
              [checked]="selectedRadioVariant() === variant.id || confirmedVariantId() === variant.id"
              (change)="onRadioChange(variant.id)"
              class="service-card__radio-input"
            />
            <span class="service-card__radio-text">{{ variant.labelKey | translate }}</span>
          </label>
        }

        <div class="service-card__actions">
          @if (showConfirmButton()) {
            <button
              mat-raised-button
              color="primary"
              class="service-card__confirm-button"
              [disabled]="!selectedRadioVariant()"
              (click)="onConfirm(); $event.stopPropagation()">
              {{ tireChange.confirmButton | translate }}
            </button>
          }
          @if (showDeselectButton()) {
            <button
              mat-flat-button
              class="service-card__deselect-button"
              (click)="onDeselect(); $event.stopPropagation()">
              {{ tireChange.deselectButton | translate }}
            </button>
          }
        </div>
      </div>
    }
  </mat-card-content>
</mat-card>
